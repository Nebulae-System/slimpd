{% extends 'partials/track/not-imported-templatevars.twig' %}
{% block content %}
    <div class="col-md-1"> </div>
		<div class="col-sm-12 col-md-4">
    	<div class="mpd-status-progressbar">
    	
    	</div>
    	<object class="waveform svg-ajax-object"
    		data="{{ placeholderSvgUrl }}"
    		data-svgurl="{{ waveformSvgUrl }}" type="image/svg+xml">
    	</object>
    	<div class="mpd-status-timestring status-timestring">
    		<span class="mpd-status-elapsed">0:00</span>&nbsp; | &nbsp;
    		<span class="mpd-status-total">0:00</span>
    	</div>
    	
    	<div class="mpd-ctrl-seekbar">
    	
    	</div>
    	<canvas id="timegrid-mpd" class="timegrid-mpd timegrid slimplayer-hidden"></canvas>
	</div>
    <div class="hidden-xs col-md-1">
    	<div class="row">
			<div class="col-sm-4">
				<button role="control" class="btn btn-trnsp player-ctrl" data-player='{"action":"prev", "mpdurl":"/mpdctrl/previous"}'>
					<i class="fa fa-chevron-left sign-ctrl fa-fw"></i>
				</button>
			</div>
			<div class="col-sm-4">
				<button role="control" class="btn btn-trnsp player-ctrl" data-player='{"action":"togglePause"}'>
					<i class="fa fa-pause sign-ctrl mpd-status-playpause fa-lg"></i>
				</button>
			</div>
			<div class="col-sm-4">
				<button role="control" class="btn btn-trnsp player-ctrl" data-player='{"action":"next", "mpdurl":"/mpdctrl/next"}'>
					<i class="fa fa-chevron-right sign-ctrl fa-fw"></i>
				</button>
			</div>
		</div>
		<div class="row">
			
			
			<div class="col-sm-4 status-random">
				<button role="control" class="btn btn-trnsp player-ctrl" data-player='{"action":"toggleRandom", "mpdurl":"/mpdctrl/toggleRandom"}' title="toggle random">
					<i class="fa fa-random sign-ctrl fa-fw"></i>
				</button>
			</div>
			<div class="col-sm-4 status-repeat">
				<button role="control" class="btn btn-trnsp player-ctrl" data-player='{"action":"toggleRepeat", "mpdurl":"/mpdctrl/toggleRepeat"}' title="toggle repeat">
					<i class="fa fa-repeat sign-ctrl fa-fw"></i>
				</button>
			</div>
			<div class="col-sm-4 status-consume">
				<button role="control" class="btn btn-trnsp player-ctrl" data-player='{"action":"toggleConsume", "mpdurl":"/mpdctrl/toggleConsume"}' title="toggle consume">
					<span><i class="fa fa-fire sign-ctrl fa-fw"></i></span>
				</button>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12 small">
				<a href="/playlist/page/current" data-ajaxtarget="#main" class="ajax-link">Warteschlange</a>
			</div>
    	</div>
    
    
    </div>
    <div class="col-sm-7 col-md-1" style="height: 100px;">
    	<a href="/album/{{ item.albumId }}" data-ajaxtarget="#main" class="ajax-link">
    		<img src="/image-100/album/{{ item.albumId }}" />
    	</a>
    </div>
    <div class="col-sm-5">
    	{% if item.id %}
	    	<div class="row">
				<div class="col-sm-4"><span class="shorten">{% include 'partials/artist/link.htm' %}</span></div>
				<div class="col-sm-4"><span class="shorten">{% include 'partials/album/link.htm' with { 'item': renderitems.albums[item.albumId] } %}</span></div>
				<div class="col-sm-4"><span class="shorten">{% include 'partials/year/link.htm' %}</span></div>
			</div>
			<div class="row">
				<div class="col-sm-4"><span class="shorten">{% include 'partials/track/title.htm' with { 'titlestring': item.title } %}</span></div>
				<div class="col-sm-4"><span class="shorten">{% include 'partials/label/link.htm' with { 'labelIds': item.labelId } %}</span></div>
				<div class="col-sm-4"><span class="shorten">{% include 'partials/genre/link.htm' with { 'genreIds': item.genreId } %}</span></div>
			</div>
			{% else %}
				{% include 'partials/track/title.htm' with { 'titlestring': item.title, 'filepath': item.relativePath  } %}
				<br />
				<div class="darker-links">
					<a href="{{ albumHref }}" data-ajaxtarget="#main" class="ajax-link"><i class="fa fa-folder-open fa-lg"></i>{{parentDir}}</a>
				</div>
				{% include 'partials/track/not-imported-badge.htm' %}
			{% endif %}
		<div class="row">
			<div class="col-sm-12 small">
				{# TODO: remove external liking as soon we have implemented a proper functionality #}
				<button class="ajax-rqst btn btn-default btn-sm" data-href="{{ temp_likerurl }}" title="temp ixwax +1">+1</button>
				<button role="control" data-href="/markup/widget-trackcontrol?item={{ item.id|default(item.relativePath) }}" title="play" class="btn btn-default btn-sm trigger-modal">
					<i class="fa fa-align-justify fa-sm"></i>
				</button>
				{% include 'partials/track/audioformat.htm' %}
			</div>
    	</div>
    </div>
    
    
    <div class="now-playing-string" style="display: none;" data-hash="{{ item.relativePathHash }}">{% include 'partials/track/title.htm' with { 'titlestring': item.title } %} by {% include 'partials/artist/string.htm' %}</div>
    
    {# FIXME: remove this as soon as MpdPlayer.js::reloadCSS() is working #}
    <style type="text/css">.track-{{ item.relativePathHash}} {border-left: 1px solid rgb(255,156,1);}</style>

{% endblock %}
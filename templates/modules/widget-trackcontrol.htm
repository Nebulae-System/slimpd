{% extends 'partials/track/not-imported-templatevars.twig' %}
{% block content %}

  <div class="modal-body">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times-circle sign"></i></span></button>
    
    <h3>
    <div class="small dark uc" style="font-size: 0.4em; line-height: 2em;">{{'artist'|ll}} - {{'title'|ll}}</div>
    	{% include 'partials/artist/link.htm' %}
    	- 
    	{% include 'partials/tracktitle.htm' with { 'titlestring': item.title } %}
    </h3>
     
	<div class="row">
	  	<div class="col-md-10">
	
	    	{# TODO: create preloader for waveformimage as it can take very long for large files #}
	    	{% if not item.id %}
	    		{% if not item.relativePath %}
	    		<object class="waveform" style="width: 100%; height: 100px;" data="/skin/default/img/notrack.svg" type="image/svg+xml"></object>
	    		{% else %}
	    		<object class="waveform" style="width: 100%; height: 100px;" data="/audiosvg/width/5000/{{ item.relativePath }}?color=3" type="image/svg+xml"></object>
	    		{% endif %}
	    	{% else %}
	    		<object class="waveform" style="width: 100%; height: 100px;" data="/audiosvg/width/5000/{{ item.id }}?color=3" type="image/svg+xml">
	    	{% endif %}
	    	
	    	</object>
		</div>
		
		<div class="col-md-2">
	    	<img src="/image-100/album/{{ item.albumId }}" />
	    </div>
	</div>
	<div class="row">
		{% if item.id %}
	    <div class="col-md-2">
	    	<span class="dark uc small">{{'duration'|ll}}</span><br />
	    	<strong>{{ item.miliseconds|formatMiliseconds }}</strong>
	    </div>
	    <div class="col-md-2 border-left">
	    	<span class="dark uc small">{{'year'|ll}}</span><br />
	    	<strong>{% include 'partials/yearlink.htm' %}</strong>
	    </div>
	    <div class="col-md-2 border-left">
	    	<span class="dark uc small">{{'genre'|ll}}</span><br />
	    	<strong>{% include 'partials/genrelink.htm' with { 'genreIds': item.genreId } %}</strong>
	    </div>
	    <div class="col-md-2 border-left">
	    	<span class="dark uc small">{{'label'|ll}}</span><br />
	    	<strong>{% include 'partials/labellink.htm' with { 'labelIds': item.labelId } %}</strong>
	    </div>
	    <div class="col-md-4 border-left">
	    	<span class="dark uc small">{{'album'|ll}}</span><br />
	    	<strong>{% include 'partials/albumlink.htm' with { 'item': renderitems.albums[item.albumId] } %}</strong>
	    </div>
	    {% else %}
	    	<div class="col-md-12">
	    		{{ fileName }}
				<br />
				<div class="darker-links">
					<a href="{{ albumHref }}" data-ajaxtarget="#main" class="ajax-link"><i class="fa fa-folder-open fa-lg"></i>{{parentDir}}</a>
				</div>
				<span class="label label-danger">track not imported yet</span>
	    	</div>
	    {% endif %}

  	</div>
  	
    

  
	{% set dirs = item.relativePath|split('/') %}
	{% set fullpath = '' %}
	{% for dir in dirs %}
		{% if loop.last == false %}
			{% set fullpath = fullpath~'/'~dir %}
		{% endif %}
	{% endfor%}
	
  
 
  	<br /><br /><br />
  	
  	
  	
  	
	  <div class="row">
	  	<div class="col-md-3">
	  		<div class="col-md-12">
	  			<h3>Abspielen</h3>
	  		</div>
	  		<div class="col-md-12">
		  		<button role="control" title="play" class="btn btn-default player-ctrl is-playbtn" data-player='{"action":"play","item":{{ playerCtrlItem }},"ext":"{{item.audioDataformat }}","hash":"{{ item.relativePathHash }}","mpdurl":"/mpdctrl/addSelect/{{ item.relativePath }}"}'>
					<i class="fa fa-play"></i> Sofort abspielen
				</button>
			</div>
			
			<div class="col-md-12">
		  		<button role="control" {{'niymarkup'|ll|raw}} class="btn btn-default" data-player='{"action":"playnext","item":{{ playerCtrlItem }},"ext":"{{item.audioDataformat }}", "mpdurl":"#"}'>
					<i class="fa fa-play"></i> Als nächstes abspielen
				</button>
			</div>
			
			<div class="col-md-12">
		  		<button role="control" {{'niymarkup'|ll|raw}} class="btn btn-default" data-player='{"action":"playnext","item":{{ playerCtrlItem }},"ext":"{{item.audioDataformat }}", "mpdurl":"#"}'>
					<i class="fa fa-plus"></i> Zur Playlist hinzufügen
				</button>
			</div>
	  		<div class="col-md-12">
		  		<button role="control" data-href="#" class="btn btn-default playerModeToggleTrigger">
					<i class="fa fa-exchange"></i> Playermodus wechseln
				</button>
			</div>
	  	</div>
	  	<div class="col-md-3">
	  		<div class="col-md-12">
	  			<h3>Bewerten</h3>
	  		</div>
	  		<div class="col-md-12">
		  		<button role="control" data-href="#" {{'niymarkup'|ll|raw}} class="btn btn-default">
					<i class="fa fa-star"></i> Toll
				</button>
			</div>
			<div class="col-md-12">
		  		<button role="control" data-href="#" {{'niymarkup'|ll|raw}} class="btn btn-default">
					<i class="fa fa-star-half-empty"></i> Uninteressant
				</button>
			</div>
			<div class="col-md-12">
		  		<button role="control" data-href="#" {{'niymarkup'|ll|raw}} class="btn btn-default">
					<i class="fa fa-eraser"></i> Furchtbar
				</button>
			</div>
	  	</div>
	  	
	  	{% if modules.enable_xwax %}
	  	<div class="col-md-3">
	  		<div class="col-md-12">
	  			<h3>Auflegen</h3>
	  			<div class="row">
	  			{% set colidx = (xwax.decks > 3) ? 4 : 12/xwax.decks %}
	  				{% for i in 1..xwax.decks %}
	  				<div class="col-md-{{colidx}}">
	  					<button role="control" data-href="/xwax/load_track/{{i}}/{{item.relativePath}}" class="ajax-rqst btn btn-default btn-lg" title="Send track to xwax deck {{i}}">
							<i class="fa fa-headphones"></i> {{i}}
						</button>
	  				</div>
	  				{% endfor%}
	  			</div>
	  			<div class="row">
	  				<button role="control" data-href="/markup/widget-xwax" title="xwax controls" class="btn btn-trnsp trigger-modal">
						<i class="fa fa-plus"></i> xwax controls
					</button>
	  			</div>
	  		</div>
	  	</div>
	  	{% endif %}
	  	
	  	<div class="col-md-3">
	  		<div class="col-md-12">
	  			<h3>Editieren</h3>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="/maintainance/trackdebug/{{ item.id }}" data-ajaxtarget="#main" class="ajax-link"><i class="fa fa-pencil"></i> Track</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="/maintainance/albumdebug/{{ item.albumId }}" data-ajaxtarget="#main" class="ajax-link"><i class="fa fa-pencil"></i> Album</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="/filebrowser/{{fullpath}}" title="{{fullpath}}/" data-ajaxtarget="#main" class="ajax-link"><i class="fa fa-folder-open"></i> Ordner anzeigen</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="#" {{'niymarkup'|ll|raw}} data-container=".modal-body"><i class="fa fa-refresh"></i> neu einlesen</a>
	  		</div>
	  	</div>
	  </div>
	  
	  
	  
	  <div class="row">
	  	<div class="col-md-3">
	  
	  	</div>
	  	<div class="col-md-3">
	  	
	  	</div>
	  	<div class="col-md-3">
	  		<div class="col-md-12">
	  			<h3>Download</h3>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="/deliver/{{item.relativePath}}" target="_blank" download><i class="fa fa-download"></i> Track</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="#" {{'niymarkup'|ll|raw}} data-container=".modal-body"><i class="fa fa-download"></i> Album</a>
	  		</div>
	  	</div>
	  	<div class="col-md-3">
	  		<div class="col-md-12">
	  			<h3>Suchen</h3>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="#" {{'niymarkup'|ll|raw}} data-container=".modal-body"><i class="fa fa-youtube"></i> Youtube</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="#" {{'niymarkup'|ll|raw}} data-container=".modal-body">
	  				<img src="/skin/default/img/icon-discogs.png" style="width: 16px; height: 16px;-webkit-filter: grayscale(100%)"/> Discogs
	  			</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="#" {{'niymarkup'|ll|raw}} data-container=".modal-body">
	  				<img src="/skin/default/img/icon-rdb.ico" style="width: 16px; height: 16px;-webkit-filter: grayscale(100%)"/> RollDaBeats
	  			</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="#" {{'niymarkup'|ll|raw}} data-container=".modal-body">
	  				<img src="/skin/default/img/icon-junodownload.png" style="width: 16px; height: 16px;-webkit-filter: grayscale(100%)"/> Juno
	  			</a>
	  		</div>
	  		<div class="col-md-12">
	  			<a href="#" {{'niymarkup'|ll|raw}} data-container=".modal-body">
	  				<img src="/skin/default/img/icon-beatport.png" style="width: 16px; height: 16px;-webkit-filter: grayscale(100%)"/> Beatport
	  			</a>
	  		</div>
	  	</div>
	  	
	  </div>
	  
  
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
  </div>
{% endblock %}

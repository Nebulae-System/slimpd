{% extends 'surrounding.htm' %}

{% block content %}

<div class="row">
{% if auth.user %}
	logged in as <strong>{{ auth.user.username }}</strong>
	<a href="{{root}}auth/signout" class="btn btn-default ajax-link">Logout</a>
{% else %}
	{% if users|length %}
		<ul>
		{% for user in users %}
			<li>
				<a href="{{ path_for('auth.quicksignin', { itemUid: user.uid }) }}" class="ajax-link">
				<img src="/index.php/imagefallback-50/artist" alt="" class="icon-50">
				{{user.username}}
				</a>
			</li>
		{% endfor %}
		</ul>
	{% endif %}
	<div class="col-md-6 col-md-offset-3">
		<div class="panXel panel-default">
			<div class="panXel-heading">Sign In</div>
			<div class="panXel-body">
				<form action="{{ path_for('auth.signin')}}" method="post" class="ajax-post">
					<div class="form-group {{ errors.username ? 'has-error' : '' }}">
						<label for="username">Username</label>
						<input type="text" class="form-control" name="username" id="username" value="{{oldInput.username}}">
						{% if errors.username %}
							<span class="help-block">{{ errors.username | first }}</span>
						{% endif %}
					</div>
					<div class="form-group {{ errors.password ? 'has-error' : '' }}">
						<label for="password">Password</label>
						<input type="password" class="form-control" name="password" id="password" value="">
						{% if errors.password %}
							<span class="help-block">{{ errors.password | first }}</span>
						{% endif %}
					</div>
					{# add cross-site-request-forgery protection #}
					{{ csrf.field | raw }}
					<div class="form-group">
						<button type="submit" class="btn btn-default">signin</button>
					</div>
				</form>
				<hr>
				<a class="btn btn-default ajax-link" href="{{ path_for('auth.signup')}}">or create new account</a>
			</div>
		</div>
	</div>
{% endif %}
</div>
{% endblock %}
